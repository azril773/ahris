{% extends "hrd_app/master/base.html" %}

{% block breadcrumb %}


<div class="br-pagebody">  

    <div class="br-section-wrapper">
        {% if messages %}
            {% for message in messages %}
            {% if 'safe' in message.tags %}
            <div class="alert alert-info alert-dismissible" role="alert" >
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
                <span class="tx-16"></span>{{ message | safe }}</span>
            </div>
            {% elif message.tags == "error" %}
            <div class="alert alert-danger alert-dismissible" role="alert" >
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
                <span class="tx-16"></span>{{ message | safe }}</span>
            </div>
            {% else %}
            <div class="alert alert-{{ message.tags }} alert-dismissible" role="alert" >
                <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                <span aria-hidden="true">&times;</span>
                </button>
                <span class="tx-16"></span>{{ message }}</span>
            </div>
            {% endif %}
            {% endfor %}
        {% endif %}



        <div class="row">
            {% if akses == "root" or akses == "it" %}
            {% comment %} <div class="col-lg-6">
                <h5 class="text-dark text-uppercase">Registrasi User Login Semua Cabang</h5>
                <div class="border p-5">
                    <form action="{% url "proses_registrasi" %}" method="post">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-12">
                                <label for="username" class="text-dark">Username</label> <br>
                                <input type="text" name="username" id="username" class="mb-2 form-control">
                            </div>
                            <div class="col-6">
                                <label for="password" class="text-dark">Password</label> <br>
                                <input type="password" name="password" id="password" class="mb-2 form-control">
                            </div>
                            <div class="col">
                                <label for="kpassword" class="text-dark">Konfirmasi Password</label> <br>
                                <input type="password" name="kpassword" id="kpassword" class="mb-2 form-control">
                            </div>
                            <input type="hidden" name="cabang" value="{{caid}}">
                            {% comment %} <div class="col-6">
                                <label for="pegawai" class="text-dark">Pegawai</label><br>
                                <select name="pegawai" id="pegawai">
                                    <option value="">Pilih Pegawai</option>
                                    {% for p in pegawai %}
                                        <option value="{{p.pk}}">{{p.nama}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="col-6">
                                <label for="status" class="text-dark">Status Pegawai</label><br>
                                <select name="status" id="status">
                                    <option value="">Pilih Status</option>
                                    {% for s in status %}
                                        <option value="{{s.pk}}">{{s.status}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="col-6 mt-2">
                                <label for="level_akses" class="text-dark">Level Akses</label><br>
                                <select name="level_akses" id="level_akses">
                                    <option value="">Pilih Akses</option>
                                    <option value="root">Root</option>
                                    <option value="admin">Admin</option>
                                    <option value="it">IT</option>
                                    <option value="user">User</option>
                                    <option value="tamu">Tamu</option>
                                </select>
                            </div>
                            <div class="col-6 mt-2">
                                <label for="divisi" class="text-dark">Akses Divisi</label><br>
                                <select name="divisi[]" id="divisi">
                                    <option value="">Pilih Divisi</option>
                                    <option value="all">Semua Divisi</option>
                                    {% for d in divisi %}
                                        <option value="{{d.pk}}">{{d.divisi}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="col-12 mt-2">
                                <label for="cabang" class="text-dark">Akses Cabang</label><br>
                                <select name="cabang[]" id="cabang" class="cabang">
                                    <option value="">Pilih Cabang</option>
                                    <option value="all">Semua Cabang</option>
                                    <option value="tasik">Plaza Asia Tasikmalaya</option>
                                    <option value="sumedang">Plaza Asia Sumedang</option>
                                    <option value="cirebon">Asia Toserba Cirebon</option>
                                    <option value="garut">Asia Toserba Garut</option>
                                    <option value="cihideung">Asia Toserba Cihideung</option>
                                </select>
                            </div> {% endcomment %}
                        {% comment %} </div>
                        <div class="d-flex justify-content-end mt-2">
                            <button type="submit" class="btn btn-primary">Daftarkan</button>
                        </div>
                    </form>
                </div>
            </div>  {% endcomment %}
            {% endif %}
            {% comment %} <div class="col-lg-6">
                <h5 class="text-dark text-uppercase">Reset Password Login </h5>
                <div class="border p-5">
                    <form action="{% url "reset_password" %}" method="post">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-12">
                                <label for="username" class="text-dark">Username</label> <br>
                                <select name="user" id="user" class='mb-2'>
                                    <option value="">Pilih User</option>
                                    {% for user in users %}
                                        <option value="{{user.pk}}">{{user.username}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="col-6">
                                <label for="password" class="text-dark">Password</label> <br>
                                <input type="password" name="password" id="password" class="mb-2 form-control">
                            </div>
                            <div class="col-6">
                                <input type="hidden" name="cabang" value="{{caid}}">
                                <label for="kpassword" class="text-dark">Konfirmasi Password</label> <br>
                                <input type="password" name="kpassword" id="kpassword" class="mb-2 form-control">
                            </div>
                        </div>
                        <div class="d-flex justify-content-end">
                            <button type="submit" class="btn btn-primary">Reset</button>
                        </div>
                    </form>
                </div>
            </div> {% endcomment %}
            {% if akses == "it" or akses == "root" %}
            <div class="col-lg-6 mt-5">
                <h5 class="text-dark text-uppercase">Akses Divisi User <b class="text-primary">Cabang {{cp}}</b></h5>
                <div class="border p-5">
                    <form action="{% url "akses_divisi" %}" method="post">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-6">
                                <label for="userd" class="text-dark">Username</label> <br>
                                <select name="userd[]" id="userd" class='mb-2'>
                                    <option value="">Pilih User</option>
                                    {% for user in users %}
                                        <option value="{{user.pk}}">{{user.nama}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="col-6">
                                <input type="hidden" name="cabang" value="{{caid}}">
                                <label for="divisid" class="text-dark">Akses Divisi</label><br>
                                <select name="divisid[]" id="divisid">
                                    <option value="">Pilih Divisi</option>
                                    <option value="all">Semua Divisi</option>
                                    {% for d in divisi %}
                                        <option value="{{d.pk}}">{{d.divisi}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        <div class="d-flex justify-content-end">
                            <button type="submit" class="btn btn-primary">Proses</button>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-lg-6 mt-5">
                <h5 class="text-dark text-uppercase">Level Akses User <b class="text-primary">Cabang {{cp}}</b></h5>
                <div class="border p-5">
                    <form action="{% url "akses_level" %}" method="post">
                        {% csrf_token %}
                        <div class="row">
                            {% comment %} <div class="col-6">
                                <label for="pegawai" class="text-dark">Pegawai</label> <br>
                                <select name="pegawai" id="pegawai" class='mb-2'>
                                    <option value="">Pilih User</option>
                                    {% for p in pegawai %}
                                        <option value="{{p.pk}}">{{p.nama}}</option>
                                    {% endfor %}
                                </select>
                            </div> {% endcomment %}
                            <div class="col-6">
                                <label for="userl" class="text-dark">Username</label> <br>
                                <select name="userl" id="userl" class='mb-2'>
                                    <option value="">Pilih User</option>
                                    {% for user in users %}
                                        <option value="{{user.pk}}">{{user.nama}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="col-6">
                                <label for="statuspegawai" class="text-dark">Status Pegawai</label> <br>
                                <select name="statuspegawai" id="statuspegawai" class='mb-2'>
                                    <option value="">Pilih User</option>
                                    {% for s in status %}
                                        <option value="{{s.pk}}">{{s.status}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <input type="hidden" name="cabang" value="{{caid}}">
                            <div class="col-6">
                                <label for="level_aksesl" class="text-dark">Level Akses</label><br>
                                <select name="level_aksesl" id="level_aksesl">
                                    <option value="">Pilih Level</option>
                                    <option value="root">Root</option>
                                    <option value="admin">Admin</option>
                                    <option value="it">IT</option>
                                    <option value="user">User</option>
                                    <option value="tamu">Tamu</option>
                                </select>
                            </div>
                        </div>
                        <div class="d-flex justify-content-end">
                            <button type="submit" class="btn btn-primary">Proses</button>
                        </div>
                    </form>
                </div>
            </div>
            {% endif %}
            {% if staff %}
            {% comment %} <div class="col-lg-6 mt-5">
                <h5 class="text-dark text-uppercase">Akses Cabang User</h5>
                <div class="border p-5">
                    <form action="{% url "akses_cabang" %}" method="post">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-6">
                                <label for="userc" class="text-dark">Username</label> <br>
                                <select name="userc[]" id="userc" class='mb-2'>
                                    <option value="">Pilih User</option>
                                    {% for user in users %}
                                        <option value="{{user.pk}}">{{user.username}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <input type="hidden" name="cabang" value="{{caid}}">
                            <div class="col-6 mt-2">
                                <label for="aksescabang" class="text-dark">Akses Cabang</label><br>
                                <select name="cabang[]" id="aksescabang" class="cabang">
                                    <option value="">Pilih Cabang</option>
                                    <option value="all">Semua Cabang</option>
                                    {% for c in ca %}
                                        <option value="{{c.pk}}" style="text-transform: capitalize;">{{c.cabang}}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        <div class="d-flex justify-content-end">
                            <button type="submit" class="btn btn-primary">Proses</button>
                        </div>
                    </form>
                </div>
            </div> {% endcomment %}
            {% comment %} <div class="col-lg-6 mt-5">
                <h5 class="text-dark text-uppercase">Super User Form</h5>
                <div class="border p-5">
                    <form action="{% url "superuser" %}" method="post">
                        {% csrf_token %}
                        <div class="row">
                            <div class="col-12">
                                <label for="username" class="text-dark">Username</label> <br>
                                <input type="text" class="form-control" name="username" id="username">
                            </div>
                            <input type="hidden" name="cabang" value="{{caid}}">
                            <div class="col-6 mt-2">
                                <label for="password" class="text-dark">Password</label><br>
                                <input type="password" name="password" class="form-control" id="password">
                            </div>
                            <div class="col-6 mt-2">
                                <label for="kpassword" class="text-dark">Konfirmasi Password</label><br>
                                <input type="password" name="kpassword" class="form-control" id="kpassword">
                            </div>
                        </div>
                        <div class="d-flex justify-content-end">
                            <button type="submit" class="btn btn-primary">Tambah</button>
                        </div>
                    </form>
                </div>
            </div> {% endcomment %}
            {% endif %}
        </div>
    </div>

</div>


{% endblock breadcrumb %}

{% block hrd_ajax %}

<script>
    $("#user").selectize()
    $("#userd").selectize({
        maxItems:null
    })
    $("#userl").selectize()
    $("#userc").selectize({
        maxItems:null
    })
    $("#divisi").selectize({
        maxItems:null
    })
    $(".cabang").selectize({
        maxItems:null
    })
    $("#divisid").selectize({
        maxItems:null
    })
    $("#level_akses").selectize()
    $("#level_aksesl").selectize()
    $("#pegawai").selectize()
    $("#status").selectize()
</script>

{% endblock hrd_ajax %}